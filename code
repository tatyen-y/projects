import requests
import base64
import json

# Установите ваши авторизационные данные
client_secret = "c1e9501f-0a26-4d4a-a86a-5c1797dceb75"
authorization_data = "ZmQyODg0NzEtZDhjMy00MWJkLWFlYjktNmY0NDUxNDNhMDljOmMxZTk1MDFmLTBhMjYtNGQ0YS1hODZhLTVjMTc5N2RjZWI3NQ=="

# Функция для получения токена доступа
def get_access_token(client_secret, authorization_data):
    url = "https://ngw.devices.sberbank.ru:9443/api/v2/oauth"
    headers = {
        "Content-Type": "application/x-www-form-urlencoded",
        "Accept": "application/json",
        "Authorization": f"Basic {authorization_data}"
    }
    data = {
        "scope": "GIGACHAT_API_PERS"
    }
    response = requests.post(url, headers=headers, data=data)
    
    if response.status_code == 200:
        return response.json()["access_token"]
    else:
        raise Exception(f"Failed to get access token: {response.status_code}, {response.text}")

# Получите токен доступа
access_token = get_access_token(client_secret, authorization_data)
print("Access Token:", access_token)

# Пример запроса к GigaChat API для получения списка моделей
def get_models(access_token):
    url = "https://gigachat.devices.sberbank.ru/api/v1/models"
    headers = {
        "Authorization": f"Bearer {access_token}"
    }
    response = requests.get(url, headers=headers)
    
    if response.status_code == 200:
        return response.json()
    else:
        raise Exception(f"Failed to get models: {response.status_code}, {response.text}")

# Выполните запрос для получения списка моделей
models = get_models(access_token)
print("Available Models:", json.dumps(models, indent=4, ensure_ascii=False))





